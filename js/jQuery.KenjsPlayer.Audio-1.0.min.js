/*! 
 * 
 * KenjsPlayer
 * Audio Player without swf, only jQuery, CSS (bootstrap) and HTML5
 * Author : Rudy Jordache
 * Version : 1.0
 * License : 
 * 
 *   */
function calc(e){var t=parseInt(e,10);var n=Math.floor(t/3600);var r=Math.floor((t-n*3600)/60);var i=t-n*3600-r*60;if(n<10){n="0"+n}if(r<10){r="0"+r}if(i<10){i="0"+i}var s=n+":"+r+":"+i;return s}(function(e){jQuery.fn.kenjsPlayer=function(t){var n=t[0];var r=n.split(",");var i="<audio id='audio' controls='controls' src='"+r[1]+"'></audio>"+"<p id='titulo' class='span2'>"+r[0]+"</p>"+"<p>"+"<span id='current' class='label' ></span>&nbsp;-&nbsp;<span id='duration' class='label'></span>"+"&nbsp;<i class='fa fa-1x fa-volume-down menos'></i><input type='range' id='vol' min='0' max='100' value='100'/><i class='fa fa-1x fa-volume-up mais'></i>"+"</p>"+"<div class='btn-group inline pull-left'>"+"<button class='btn btn-small fa fa-1x fa-play' data-controls='play'></button>"+"<button class='btn btn-small fa fa-1x fa-stop' data-controls='stop'></button>"+"<button class='btn btn-small fa fa-1x fa-pause' data-controls='pause'></button>"+"</div>"+"<div id='progresso' class='progress progress-striped progress-danger span2'>"+"<div class='bar'></div>"+"</div><br />"+"<div class='btn-group inline'>"+"<button class='btn btn-small fa fa-1x fa-fast-backward' data-controls='previous'></button>"+"<button class='btn btn-small fa fa-1x fa-backward' data-controls='backward'></button>"+"<button class='btn btn-small fa fa-1x fa-forward' data-controls='forward'></button>"+"<button class='btn btn-small fa fa-1x fa-fast-forward' data-controls='next'></button>"+"</div>"+"&nbsp;&nbsp;<button id='hide' class='btn fa fa-1x fa-chevron-up' title='Ocultar player'></button>"+"<p class='bitdown'><button id='hide' class='btn fa fa-1x fa-chevron-down pull-right' title='Exibir player'></button></p>";e(this).html(i);if(t){e.extend(t);return this.each(function(){var n=t;var r=e("#audio");document.getElementById("audio").play();var i=document.getElementById("audio").duration;setInterval(function(){var t=document.getElementById("audio").duration;var r=document.getElementById("audio").currentTime;var i=calc(t);var s=calc(r);var o=r*100/t;e("#duration").html(i);e("#current").html(s);e("#progresso .bar").css("width",o+"%");if(r==t){var u=e("#titulo").html();var a=e("#audio").attr("src");var f=Array(u,a).toString();var l=n.indexOf(f);var c=n.length;if(l>=0||l<c){var h=l+1;var p=n[h];var d=p.split(",");e("#titulo").html(d[0]);e("#audio").attr("src",d[1]);document.getElementById("audio").play()}}if(e("input[type='range']").val()==0){e(".menos").removeClass("fa-volume-down");e(".menos").addClass("fa-volume-off")}else{e(".menos").removeClass("fa-volume-off");e(".menos").addClass("fa-volume-down")}},1e3);e("button[data-controls=play]").click(function(){document.getElementById("audio").play()});e("button[data-controls=pause]").click(function(){document.getElementById("audio").pause()});e("button[data-controls=stop]").click(function(){document.getElementById("audio").pause();document.getElementById("audio").currentTime=0});e("button[data-controls=backward]").click(function(){var e=document.getElementById("audio").currentTime;document.getElementById("audio").currentTime-=5});e("button[data-controls=forward]").click(function(){document.getElementById("audio").currentTime+=5});e("button[data-controls=previous]").click(function(){var t=e("#titulo").html();var r=e("#audio").attr("src");var i=Array(t,r).toString();var s=n.indexOf(i);var o=n.length;if(s>0||s<o){var u=s-1;var a=n[u];var f=a.split(",");e("#titulo").html(f[0]);e("#audio").attr("src",f[1]);document.getElementById("audio").play()}});e("button[data-controls=next]").click(function(){var t=e("#titulo").html();var r=e("#audio").attr("src");var i=Array(t,r).toString();var s=n.indexOf(i);var o=n.length;if(s>=0||s<o){var u=s+1;var a=n[u];var f=a.split(",");e("#titulo").html(f[0]);e("#audio").attr("src",f[1]);document.getElementById("audio").play()}});e("input[type='range']").change(function(){var t=e(this).val();document.getElementById("audio").volume=t/100});e(".menos").click(function(){document.getElementById("audio").volume=0;e("input[type='range']").val(0);e(".menos").removeClass("fa-volume-down");e(".menos").addClass("fa-volume-off")});e(".mais").click(function(){document.getElementById("audio").volume=1;e("input[type='range']").val(100);e(".menos").removeClass("fa-volume-off");e(".menos").addClass("fa-volume-down")});e("#hide").click(function(){e("#audio-player").animate({top:"-155px"});e(".bitdown").fadeIn("fast")});e(".bitdown").click(function(){e("#audio-player").animate({top:"0px"});e(".bitdown").fadeOut("fast")})})}}})(jQuery)
